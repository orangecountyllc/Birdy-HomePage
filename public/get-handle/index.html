<!-- const res = await fetch('https://xmkvtmgtwb.execute-api.us-east-1.amazonaws.com/dev/check-handle', { -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Birdy - Find Your Account</title>
  <link rel="icon" href="../static/logo/icon.jpg" type="image/png" />
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Preload Nunito Fonts -->
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-Bold.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-BoldItalic.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-Italic.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-Light.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-LightItalic.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-ExtraBold.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-ExtraBoldItalic.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-ExtraLight.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-ExtraLightItalic.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-SemiBold.ttf" as="font" type="font/ttf" crossorigin="anonymous" />
  <link rel="preload" href="/themes/fonts/Nunito/Nunito-SemiBoldItalic.ttf" as="font" type="font/ttf" crossorigin="anonymous" />

  <style>
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-Regular.ttf') format('truetype');
      font-weight: 400;
      font-style: normal;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-Bold.ttf') format('truetype');
      font-weight: 700;
      font-style: normal;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-BoldItalic.ttf') format('truetype');
      font-weight: 700;
      font-style: italic;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-Italic.ttf') format('truetype');
      font-weight: 400;
      font-style: italic;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-Light.ttf') format('truetype');
      font-weight: 300;
      font-style: normal;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-LightItalic.ttf') format('truetype');
      font-weight: 300;
      font-style: italic;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-ExtraBold.ttf') format('truetype');
      font-weight: 800;
      font-style: normal;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-ExtraBoldItalic.ttf') format('truetype');
      font-weight: 800;
      font-style: italic;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-ExtraLight.ttf') format('truetype');
      font-weight: 200;
      font-style: normal;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-ExtraLightItalic.ttf') format('truetype');
      font-weight: 200;
      font-style: italic;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-SemiBold.ttf') format('truetype');
      font-weight: 600;
      font-style: normal;
    }
    @font-face {
      font-family: 'Nunito';
      src: url('/themes/fonts/Nunito/Nunito-SemiBoldItalic.ttf') format('truetype');
      font-weight: 600;
      font-style: italic;
    }

    html, body {
      font-family: 'Nunito', sans-serif;
      line-height: 1.6;
    }

    /* Fancy Loading Animation */
    .loader {
      display: none;
      width: 60px;
      height: 60px;
      border: 8px solid #e5e7eb; /* gray-200 */
      border-top: 8px solid #1e3a8a; /* blue-900 */
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Pulse Animation for Result */
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .pulse-animation {
      animation: pulse 1.5s ease-in-out infinite;
    }
  </style>
</head>
<body class="bg-blue-50 text-black">
  <!-- Navbar -->
  <nav class="bg-white shadow-lg sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex-shrink-0">
          <a href="/" class="text-2xl font-extrabold text-blue-900 tracking-tight">Birdy</a>
        </div>
        <div class="hidden md:flex space-x-8">
          <a href="#home" class="text-blue-900 hover:text-blue-600 font-semibold text-lg">Home</a>
          <a href="#features" class="text-blue-900 hover:text-blue-600 font-semibold text-lg">Features</a>
          <a href="#faq" class="text-blue-900 hover:text-blue-600 font-semibold text-lg">FAQ</a>
          <a href="#contact" class="text-blue-900 hover:text-blue-600 font-semibold text-lg">Contact</a>
        </div>
        <div class="md:hidden">
          <button id="menu-toggle" class="text-blue-900 focus:outline-none">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
            </svg>
          </button>
        </div>
      </div>
    </div>
    <div id="mobile-menu" class="hidden md:hidden bg-white shadow-md">
      <div class="px-4 pt-2 pb-3 space-y-1">
        <a href="#home" class="block text-blue-900 hover:text-blue-600 font-semibold text-lg">Home</a>
        <a href="#features" class="block text-blue-900 hover:text-blue-600 font-semibold text-lg">Features</a>
        <a href="#faq" class="block text-blue-900 hover:text-blue-600 font-semibold text-lg">FAQ</a>
        <a href="#contact" class="block text-blue-900 hover:text-blue-600 font-semibold text-lg">Contact</a>
      </div>
    </div>
  </nav>

  <!-- Username Search Section -->
  <section class="py-12 sm:py-20 bg-gradient-to-r from-blue-100 to-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl sm:text-4xl font-extrabold text-blue-900 mb-8 text-center">Find Your Birdy Account</h2>
      <p class="text-lg sm:text-xl text-gray-600 mb-8 text-center max-w-2xl mx-auto">Enter your phone number and username to check if you're already part of the flock!</p>
      
      <!-- Search Form -->
      <div class="bg-white p-8 rounded-xl shadow-2xl max-w-md mx-auto">
        <form id="usernameSearchForm" class="flex flex-col gap-4">
          <div class="flex items-end gap-2">
            <div class="flex-1">
              <label for="phone" class="block text-gray-600 font-semibold mb-2">Phone Number <span class="text-red-500">*</span></label>
              <input type="tel" id="phone" required class="w-full p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-600 transition-all duration-300 hover:border-purple-300" placeholder="123-456-7890" maxlength="12">
            </div>
            <button type="button" id="validatePhone" class="bg-blue-600 text-white font-semibold px-4 py-3 rounded-full hover:bg-blue-700 transition-all duration-300 shadow-md hover:shadow-lg">Next</button>
          </div>
          <div>
            <label for="username" class="block text-gray-600 font-semibold mb-2">Username <span class="text-red-500">*</span></label>
            <input type="text" id="username" required disabled class="w-full p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-600 transition-all duration-300 hover:border-purple-300 disabled:bg-gray-100 disabled:cursor-not-allowed" placeholder="Your Username" minlength="4" maxlength="15">
            <p class="text-sm text-gray-500 mt-1">Min 4 characters, max 15 characters</p>
          </div>
          <button type="submit" disabled id="submitButton" class="bg-blue-600 text-white font-semibold px-6 py-3 rounded-full hover:bg-blue-700 transition-all duration-300 shadow-md hover:shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed">Search</button>
        </form>
        <!-- Loading Animation -->
        <div id="loader" class="loader"></div>
        <!-- Result Message -->
        <p id="resultMessage" class="text-center mt-4 text-lg font-semibold hidden"></p>
      </div>
    </div>
  </section>

  <!-- Driver Profile Preview -->
  <section class="py-12 sm:py-20 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl sm:text-4xl font-extrabold text-blue-900 mb-8 text-center">Meet Your Trusted Drivers</h2>
      <div class="bg-gray-50 p-6 rounded-lg shadow-md max-w-md mx-auto">
        <div class="flex items-center mb-4">
          <div class="w-16 h-16 rounded-full bg-blue-900 text-white flex items-center justify-center font-bold text-2xl mr-4">JD</div>
          <div>
            <h3 class="text-xl font-bold text-blue-900">John Doe</h3>
            <p class="text-sm text-gray-500">Trusted Driver, Washington DC</p>
          </div>
        </div>
        <p class="text-lg font-light text-gray-700 italic mb-4">"Reliable, friendly, and always on time. Book me for a safe ride!"</p>
        <div class="flex items-center mb-4">
          <svg class="w-5 h-5 text-yellow-400 mr-1" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
          </svg>
          <span class="text-gray-600">4.9 (120 reviews)</span>
        </div>
        <a href="/profile/johndoe" class="inline-block bg-purple-700 text-white px-6 py-3 rounded-full hover:bg-purple-600 transition font-semibold text-lg shadow-md">View Profile</a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-blue-900 text-white py-12">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <h3 class="text-2xl font-bold mb-4">Birdy</h3>
          <p class="font-light text-lg">Your trusted birdy, just one tap away.</p>
        </div>
        <div>
          <h3 class="text-2xl font-bold mb-4">Quick Links</h3>
          <ul class="space-y-2 font-light text-lg">
            <li><a href="#home" class="hover:text-blue-300">Home</a></li>
            <li><a href="#features" class="hover:text-blue-300">Features</a></li>
            <li><a href="#faq" class="hover:text-blue-300">FAQ</a></li>
            <li><a href="#contact" class="hover:text-blue-300">Contact</a></li>
            <li><a href="/privacy" class="hover:text-blue-300">Privacy</a></li>
            <li><a href="/Drivers" class="hover:text-blue-300">Drivers</a></li>
            <li><a href="/Riders" class="hover:text-blue-300">Riders</a></li>
          </ul>
        </div>
        <div>
          <h3 class="text-2xl font-bold mb-4">Contact Us</h3>
          <p class="font-light text-lg">Email: support@Birdy.com</p>
          <p class="font-light text-lg">Phone: (123) 456-7890</p>
          <p class="font-light text-lg">Address: 123 Innovation St, Tech City</p>
        </div>
      </div>
      <div class="mt-8 text-center">
        <p class="font-light text-lg">© 2025 Birdy. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // Mobile Menu Toggle
    document.getElementById('menu-toggle').addEventListener('click', () => {
      const mobileMenu = document.getElementById('mobile-menu');
      mobileMenu.classList.toggle('hidden');
    });

    // Phone Number Formatting
    document.getElementById('phone').addEventListener('input', (e) => {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 3 && value.length <= 6) {
        value = `${value.slice(0, 3)}-${value.slice(3)}`;
      } else if (value.length > 6) {
        value = `${value.slice(0, 3)}-${value.slice(3, 6)}-${value.slice(6, 10)}`;
      }
      e.target.value = value;
    });

    // Validate Phone Number and Enable Username Input
    document.getElementById('validatePhone').addEventListener('click', () => {
      const phoneInput = document.getElementById('phone');
      const usernameInput = document.getElementById('username');
      const submitButton = document.getElementById('submitButton');
      const phoneRegex = /^\d{3}-\d{3}-\d{4}$/;

      if (phoneRegex.test(phoneInput.value)) {
        usernameInput.disabled = false;
        submitButton.disabled = false;
        phoneInput.classList.remove('border-red-500');
        phoneInput.classList.add('border-green-500');
      } else {
        phoneInput.classList.add('border-red-500');
        phoneInput.classList.remove('border-green-500');
        alert('Please enter a valid phone number (e.g., 123-456-7890).');
      }
    });

    // Username Search Form Submission
    document.getElementById('usernameSearchForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const phone = document.getElementById('phone').value.trim();
      const handle = document.getElementById('username').value.trim();
      const loader = document.getElementById('loader');
      const resultMessage = document.getElementById('resultMessage');

      // Validate username length
      if (handle.length < 4 || handle.length > 15) {
        alert('handle must be between 4 and 15 characters.');
        return;
      }

      // Reset previous results
      resultMessage.classList.add('hidden');
      resultMessage.classList.remove('text-green-600', 'text-red-600', 'pulse-animation');

      // Show loader
      loader.style.display = 'block';

    try {
  // API call to check handle
  const res = await fetch('https://xmkvtmgtwb.execute-api.us-east-1.amazonaws.com/dev/check-handle', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ phone, handle }),
  });

  // Get API response
  const data = await res.json();

  // Hide loader
  loader.style.display = 'none';

  // Show result
  resultMessage.textContent = data.message;
  resultMessage.classList.remove('hidden');
  resultMessage.classList.add(data.found ? 'text-green-600' : 'text-red-600', 'pulse-animation');

  // Redirect to profile if successful
  if (data.found || data.message.includes('successful')) {
    setTimeout(() => {
      window.location.href = `/profile/${handle}`;
    }, 2000);
  }
}
  catch (error) {
        console.error('Error:', error);
        loader.style.display = 'none';
        resultMessage.textContent = 'Something went wrong. Please try again.';
        resultMessage.classList.remove('hidden');
        resultMessage.classList.add('text-red-600');
      }
    });
  </script>
</body>
</html>